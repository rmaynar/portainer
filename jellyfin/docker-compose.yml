version: '3.8'
services:
  jellyfin:
    image: jellyfin/jellyfin:latest
    container_name: jellyfin
    environment:
      # These variables control the user ID and group ID for file access
      - PUID=${PUID}
      - PGID=${PGID}
      # This variable sets the container timezone
      - TZ=${TZ} 
    volumes:
      # We use a variable for the base path to make the config/cache paths portable
      - ${JELLYFIN_BASE_PATH}/config:/config
      - ${JELLYFIN_BASE_PATH}/cache:/cache
      
      # The media path is still /media/usb-drive on the host, which is a fixed mount
      - /media/usb-drive:/media 
    ports:
      - 8096:8096
    restart: unless-stopped
    
    # OPTIONAL: Hardware Acceleration
    devices:
      - /dev/dri:/dev/dri
